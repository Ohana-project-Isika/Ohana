<!DOCTYPE html>
<html xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:xlink="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://primefaces.org/ui ">
<h:head>
    <title>Premier exemple JSF 2.0</title>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <link rel="stylesheet" href="../resources/css/styles.css"/>
    <script src="../resources/js/ticketing.js"></script>
</h:head>
<h:body>
    <h1>ASSOCIATIONS : Créer, lire, modifier et supprimer un évènement</h1>
    <p:separator />
    <br />
    <h2>Formulaire de création d'un évènement</h2>
    <h:form method="post">
        <h:panelGrid columns="3">
            <h:outputText value="Nom de l'évènement :"/>
            <h:inputText id="Name"
                         value="#{eventController.event.name}"/>
            <h:message style="color:red" for="Name"/>

            <h:outputText value="Description de l'évènement :"/>
            <h:inputText id="description"
                         value="#{eventController.event.description}"/>
            <h:message style="color:red" for="description"/>

            <h:outputText value="Date de début de l'évènement :"/>
            <p:calendar id="startDate"
                        value="#{eventController.event.startDate}" />

            <p:calendar/>
            <h:message style="color:red" for="startDate"/>

            <h:outputText value="Date de fin de l'évènement:"/>
            <p:calendar id="endDate"
                        value="#{eventController.event.endDate}" />

            <p:calendar/>
            <h:message style="color:red" for="endDate"/>

            <h:outputText value="Quantité de billet disponible :"/>
            <h:inputText id="ticketQty"
                         value="#{eventController.event.ticketQuantity}"/>
            <h:message style="color:red" for="ticketQty"/>

            <h:commandButton action="#{eventController.addEvent}" value="Création de l'évènement"/>
        </h:panelGrid>
    </h:form>
    <p:separator />
    <br />
    <h2>Formulaire de modification d'un évènement</h2>
    <h:form method="post">
        <h:panelGrid columns="3">
            <h:outputText value="Nom de l'évènement :"/>
            <h:inputText id="updateName"
                         value="#{eventController.event.name}"/>
            <h:message style="color:red" for="Name"/>

            <h:outputText value="Description de l'évènement :"/>
            <h:inputText id="updateDescription"
                         value="#{eventController.event.description}"/>
            <h:message style="color:red" for="description"/>

            <h:outputText value="Date de début de l'évènement :"/>
            <h:outputText id="updateStartDate" disabled="true"
                          value="#{eventController.event.startDate}"/>

            <h:message style="color:red" for="startDate"/>

            <h:outputText value="Date de fin de l'évènement:"/>
            <p:calendar id="updateEndDate"
                        value="#{eventController.event.endDate}" mode="inline"/>
            <p:calendar/>
            <h:message style="color:red" for="endDate"/>

            <h:outputText value="Quantité de billet disponible :"/>
            <h:inputText id="updateTicketQty"
                         value="#{eventController.event.ticketQuantity}"/>
            <h:message style="color:red" for="ticketQty"/>

            <h:commandButton action="#{eventController.updateEvent}" value="Création de l'évènement"/>
        </h:panelGrid>
    </h:form>
    <br />
    <h2>Liste de tout les évènements</h2>
    <div>
        <h:dataTable value="#{eventController.events}" var="event"
                     headerClass="eventTableHeader"
                     rowClasses="eventTableOddRow,eventTableEvenRow">
            <h:column>
                <f:facet name="header">Nom de l'évènement</f:facet>
                #{event.name}
            </h:column>

            <h:column>
                <f:facet name="header">Description de l'évènement</f:facet>
                #{event.description}
            </h:column>

            <h:column>
                <f:facet name="header">Date de début</f:facet>
                #{event.startDate}
            </h:column>

            <h:column>
                <f:facet name="header">Heure de début</f:facet>
                #{event.startTime}
            </h:column>

            <h:column>
                <f:facet name="header">Date de fin</f:facet>
                #{event.endDate}
            </h:column>

            <h:column>
                <f:facet name="header">Heure de fin</f:facet>
                #{event.endTime}
            </h:column>

            <h:column>
                <f:facet name="header">Nombre de tickets disponible</f:facet>
                #{event.ticketQuantity}
            </h:column>

            <h:column>
                <f:facet name="header">Tarif</f:facet>
                #{event.ticket.rateType}
            </h:column>

            <h:column>
                <f:facet name="header">TVA</f:facet>
                #{event.ticket.appliedTVA}
            </h:column>

            <h:column>
                <f:facet name="header">Lieu de l'évènement</f:facet>
                #{event.address}
            </h:column>
        </h:dataTable>
    </div>

    <h3>DataModel</h3>
    <p:tabView value="#{eventController.events}" var="event">
        <p:tab title="Evènement : #{event.id}">
            <h:panelGrid columns="2" cellpadding="5">
                <h:outputText value="Brand:" style="font-weight: bold"/>
                <h:outputText value="#{event.name}" />

                <h:outputText value="Year:" style="font-weight: bold"/>
                <h:outputText value="#{event.description}" />

                <h:outputText value="Year:" style="font-weight: bold"/>
                <h:outputText value="#{event.ticketQuantity}" />

            </h:panelGrid>
        </p:tab>
    </p:tabView>
</h:body>

</html>