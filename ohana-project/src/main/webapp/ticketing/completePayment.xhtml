<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
                template="/WEB-INF/templates/layout.xhtml">

    <ui:define name="content">
        <h:outputStylesheet library="css" name="styles.css"  />
        <script type="text/javascript" src="#{request.contextPath}/resources/js/ticketing.js"></script>

        <div class="card">
            <h:form id="card"  prependId="false">
                <p:panelGrid id="pnlCreditCard" columns="4">
                    <f:facet name="header">
                        <pe:creditCard id="creditCard" labelMonthYear="MM/YY" placeholderExpiry="**/**" placeholderName="OHANA PLATFORM SA"/>
                    </f:facet>
                    <p:inputText id="number" placeholder="NumÃ©ro de carte" inputmode="numeric" value="#{paymentController.cardNumber}"/>
                    <p:inputText id="name" placeholder="Nom complet" value="#{paymentController.fullName}"/>
                    <p:outputPanel id="expiration">
                        <p:datePicker id="month" widgetVar="monthPicker" view="month" pattern="MM/yy" yearNavigator="true" yearRange="2021:2050" mindate="#{paymentController.minExpiry}"
                                      onchange="$('#expiry').val(PF('monthPicker').input.val()); $('#expiry')[0].dispatchEvent(new Event('change'));"/>
                        <!-- Hide Expiration field so we can use PF MonthPicker -->
                        <p:inputText id="expiry" placeholder="MM/YY" inputmode="numeric" style="display:none" value="#{paymentController.expiry}"/>
                    </p:outputPanel>
                    <p:inputText id="cvc" placeholder="CVC" inputmode="numeric" value="#{paymentController.cvc}"/>
                </p:panelGrid>

                <h:commandLink id="link" action="#{paymentController.validatePayment}"
                               value="Valider le paiement"/>
            </h:form>
        </div>
    </ui:define>
</ui:composition>
